fragment category on CategoryResponse {
  id
  type
  name
  slug
  position
}

fragment group on GroupResponse {
  id
  name
  slug
  description
  icon
  position
  roles {
    id
    name
    position
    hexColor
    groupId
  }
  categories {
    ...category
  }
}

fragment groupProfile on GroupProfileResponse {
  id
  name
  slug
  description
  icon
}

fragment groupPreview on GroupPreviewResponse {
  id
  name
  slug
  description
  icon
  position
  sells {
    ...offerPreview
  }
  buys {
    ...offerPreview
  }
}

query FindGroups($cursor: ID, $skip: Int! = 1, $take: Int!) {
  findGroups(cursor: $cursor, skip: $skip, take: $take) {
    edges {
      node {
        ...group
      }
    }
    pageInfo {
      endCursor
    }
  }
}

query FindGroupProfiles($keyword: String, $cursor: ID, $skip: Int! = 1, $take: Int!) {
  findGroupProfiles(keyword: $keyword, cursor: $cursor, skip: $skip, take: $take) {
    edges {
      node {
        ...groupProfile
      }
      cursor
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

query findGroup($id: ID, $slug: String) {
  findGroup(id: $id, slug: $slug) {
    ...group
  }
}

query findGroupPreviews {
  findGroupPreviews {
    ...groupPreview
  }
}
