fragment group on GroupResponse {
  id
  name
  slug
  description
  icon
  position
  roles {
    id
    name
    position
    hexColor
    groupId
  }
  categories {
    ...category
  }
}

fragment groupProfile on GroupProfileResponse {
  id
  name
  slug
  description
  icon
}

fragment groupPreview on GroupPreviewResponse {
  id
  name
  slug
  description
  icon
  position
  sells {
    ...offerPreview
  }
  buys {
    ...offerPreview
  }
}

query FindGroups($cursor: ID, $skip: Int! = 1, $take: Int!) {
  findGroups(cursor: $cursor, skip: $skip, take: $take) {
    edges {
      node {
        ...group
      }
    }
    pageInfo {
      endCursor
    }
  }
}

query FindGroupProfiles(
  $where: FindGroupProfilesWhereInput
  $orderBy: FindGroupProfilesOrderByInput
  $keyword: String,
  $target: String,
  $cursor: ID,
  $skip: Int! = 1,
  $take: Int!
) {
  findGroupProfiles(
    where: $where
    orderBy: $orderBy
    keyword: $keyword
    target: $target
    cursor: $cursor
    skip: $skip
    take: $take
  ) {
    edges {
      node {
        ...groupProfile
      }
      cursor
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

query FindCategories(
  $where: FindCategoriesWhereInput
  $orderBy: FindCategoriesOrderByInput
  $keyword: String,
  $target: String,
  $cursor: ID,
  $skip: Int! = 1,
  $take: Int!
) {
  findCategories(
    where: $where
    orderBy: $orderBy
    keyword: $keyword
    target: $target
    cursor: $cursor
    skip: $skip
    take: $take
  ) {
    edges {
      node {
        ...category
      }
      cursor
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

query FindGroup($id: ID, $slug: String) {
  findGroup(id: $id, slug: $slug) {
    ...group
  }
}

query FindGroupPreviews {
  findGroupPreviews {
    ...groupPreview
  }
}
