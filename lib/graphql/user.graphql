fragment role on RoleResponse {
  id
  name
  position
  hexColor
  groupId
}

fragment user on UserResponse {
  id
  createdAt
  username
  about
  avatarURL
  bot
}

fragment author on AuthorResponse {
  id
  createdAt
  username
  about
  avatarURL
  bot
  socialAccounts {
    ...socialAccountWithoutAuth
  }
  roles {
    ...role
  }
}

fragment myUser on MyUserResponse {
  id
  createdAt
  username
  about
  name
  phoneNumber
  avatarURL
  bot
  socialAccounts {
    ...socialAccount
  }
  roles {
    ...role
  }
}

query findUser(
  $provider: String
  $socialId: String
  $username: String
) {
  findUser(provider: $provider, socialId: $socialId, username: $username) {
    ...user
  }
}

query findAuthor(
  $id: ID
  $username: String
) {
  findAuthor(
    id: $id
    username: $username
  ) {
    ...author
  }
}

query findMyUser {
  findMyUser {
    ...myUser
  }
}

query findUsers(
  $where: JSON
  $orderBy: JSON
  $keyword: String
  $cursor: ID
  $skip: Int!
  $take: Int!
) {
  findUsers(
    where: $where
    orderBy: $orderBy
    keyword: $keyword
    cursor: $cursor
    skip: $skip
    take: $take
  ) {
    edges {
      node {
        ...user
      }
      cursor
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

mutation updateUser(
  $input: UpdateUserInput!
) {
  updateUser(input: $input)
}

# NOTE
# createUser -> signInUser

# TODO
# deleteUser

mutation linkSocialProfile($input: LinkSocialProfileInput!) {
  linkSocialProfile(input: $input)
}
