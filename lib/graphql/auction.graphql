fragment auction on AuctionResponse {
  post {
    ...post
  }
  id
  createdAt
  updatedAt
  originalEndDate
  extendedEndDate
  version
  content
  currentBidPrice
  hammerPrice
  shippingCost
  shippingType
  status
}

fragment auctionPreview on AuctionPreviewResponse {
  post {
    ...postPreviewWithUser
  }
  id
  createdAt
  updatedAt
  originalEndDate
  extendedEndDate
  version
  content
  currentBidPrice
  hammerPrice
  shippingCost
  shippingType
  status
}

fragment updatedAuctionResponse on UpdatedAuctionResponse {
  id
  updatedAt
  extendedEndDate
  status
}

query FindAuctionPreviews(
  $where: JSON
  $orderBy: JSON
  $keyword: String
  $cursor: ID
  $skip: Int!
  $take: Int!
) {
  findAuctionPreviews(
    where: $where
    orderBy: $orderBy
    keyword: $keyword
    cursor: $cursor
    skip: $skip
    take: $take
  ) {
    edges {
      node {
        ...auctionPreview
      }
      cursor
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

query FindAuction(
  $id: ID
  $slug: String
) {
  findAuction(
    id: $id
    slug: $slug
  ) {
    ...auction
  }
}

query FindAuctionInteractionItems(
  $where: JSON
  $orderBy: JSON
  $keyword: String
  $cursor: ID
  $skip: Int!
  $take: Int!
) {
  findAuctionInteractionItems(
    where: $where
    orderBy: $orderBy
    keyword: $keyword
    cursor: $cursor
    skip: $skip
    take: $take
  ) {
    edges {
      node {
        __typename
        ...on BidResponse {
          ...bid
        }
        ...on CommentWithAuthorResponse {
          ...commentWithAuthor
        }
      }
      cursor
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}


mutation CreateAuction($input: CreateAuctionInput!) {
  createAuction(input: $input)
}

subscription AuctionUpdated($auctionId: ID!) {
  auctionUpdated(auctionId: $auctionId) {
    ...updatedAuctionResponse
  }
}