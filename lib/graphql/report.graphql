fragment lastReport on LastReportResponse {
  id
  createdAt
}

fragment reportPreview on ReportPreviewResponse {
  id
  createdAt
  updatedAt
  type
  reportedUser {
    ...author
  }
  reportedPostId
  reportedCommentId
  groupId
  status
  reason
  description
}

fragment report on ReportResponse {
  id
  createdAt
  updatedAt
  type
  reportedUser {
    ...author
  }
  reportedPostId
  reportedPost {
    ...postPreviewWithoutUser
  }
  reportedCommentId
  groupId
  status
  reason
  description
  comments {
    ...reportComment
  }
  version {
    ...version
  }
}

fragment reportComment on ReportCommentResponse {
  id
  createdAt
  updatedAt
  reportId
  content
  userId
}

mutation CreateReport($input: CreateReportInput!) {
  createReport(input: $input) {
    ...mutationResponse
  }
}

query FindReportPreviews(
  $where: FindReportPreviewsWhereInput
  $orderBy: FindReportPreviewsOrderByInput
  $keyword: String
  $target: String
  $cursor: ID
  $skip: Int!
  $take: Int!
) {
  findReportPreviews(
    where: $where
    orderBy: $orderBy
    keyword: $keyword
    target: $target
    cursor: $cursor
    skip: $skip
    take: $take
  ) {
    edges {
      node {
        ...reportPreview
      }
      cursor
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

query FindLastReport {
  findLastReport {
    ...lastReport
  }
}

query FindReport(
  $id: ID!
) {
  findReport(id: $id) {
    ...report
  }
}

query FindReportComment(
  $reportId: ID!
) {
  findReportComment(
    reportId: $reportId
  ) {
    ...reportComment
  }
}

mutation CommentReport($input: CommentReportInput!) {
  commentReport(input: $input) {
    ...mutationResponse
  }
}

mutation UpdateReportComment($input: UpdateReportCommentInput!) {
  updateReportComment(input: $input) {
    ...mutationResponse
  }
}
